<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ app_name }}</title>
    <style>
      body{font-family:system-ui,-apple-system,Arial,sans-serif;margin:1.5rem}
      .container{max-width:1000px;margin:0 auto}
      .nav{display:flex;gap:12px;align-items:center;margin-bottom:1rem}
      .nav a{text-decoration:none}
      .card{border:1px solid #ddd;border-radius:12px;padding:1rem;margin:1rem 0}
      .row{display:flex;gap:8px;flex-wrap:wrap}
      input,select,button{padding:.5rem}
      table{border-collapse:collapse;width:100%}
      th,td{border:1px solid #ddd;padding:.5rem;text-align:left}
      th{background:#f6f6f6}
      .flash{padding:.6rem .8rem;border-radius:8px;margin:.3rem 0}
      .success{background:#e6ffed;border:1px solid #b7f5c3}
      .danger{background:#ffecec;border:1px solid #ffb4b4}
      .info{background:#eef5ff;border:1px solid #c8d9ff}
      .warning{background:#fff5dd;border:1px solid #ffe39c}
      .progress{height:10px;background:#eee;border-radius:6px;overflow:hidden}
      .progress>div{height:100%;background:#4caf50}
    </style>
    <!-- Chart.js via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="nav">
        <strong>{{ app_name }}</strong>
        {% if current_user.is_authenticated %}
          <span style="margin-left:auto">{{ current_user.email }}</span>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <span style="margin-left:auto"></span>
          <a href="{{ url_for('login') }}">Login</a>
          <a href="{{ url_for('register') }}">Register</a>
        {% endif %}
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for cat, msg in messages %}
            <div class="flash {{ cat }}">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>
  </body>
</html>
